<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Pragma" content="no-cache">
<meta name="viewport" content="width=device-width, height=50">
<style type="text/css">
	body { margin: 0px; padding: 0px; max-height: 50px !important; overflow: hidden; background-color: transparent; }
	div.adwrapper { margin: 0px; padding: 0px; max-height: 50px !important; overflow: hidden; }
</style>
<script type="text/javascript">
	var testStatus = true;// true = pass, false = fail
	
	function showTestStatus() {
		if (testStatus) {
			document.getElementById("asdf").style.backgroundColor = "#00ff00";
		} else {
			document.getElementById("asdf").style.backgroundColor = "#ff0000";
		}
	}
	
	var counter = 0;
	function test() {
		mraid.getCurrentPosition();
		
		if (counter == 0) {
			var obj = {width:300,height:300,offsetX:9999,offsetY:-2090,customClosePosition:"top-left",allowOffscreen:false};
			mraid.setResizeProperties(obj);
			mraid.resize();
		} else if (counter == 1) {
			var obj = {width:150,height:300,offsetX:-50,offsetY:-200,customClosePosition:"top-right",allowOffscreen:true};
			mraid.setResizeProperties(obj);
			mraid.resize();
		}
		counter++;
		
		if (counter == 2) {
			counter = 0;
		}
	}
	
</script>
</head>
<body>

<div id="asdf" style="background-color: #00ff00; height: 50px;" onclick="test();">
	MRAID resize tests<br />
	MRAID resize tests
</div>

<script src="mraid.js"></script>

<script type="text/javascript">
if (mraid.getState() === 'loading') {
	mraid.addEventListener('ready', function() {
		var obj = {width:200,height:300,offsetX:100,offsetY:0,customClosePosition:"top-left",allowOffscreen:true};
		mraid.useCustomClose(false);
		mraid.setResizeProperties(obj);
		var obj = mraid.getResizeProperties();
		if (obj.width == 200 && obj.height == 300 && obj.offsetX == 100 && obj.offsetY == 0 && obj.customClosePosition == "top-left" && obj.allowOffscreen == true) {
			// ok!
		} else {
			testStatus = false;
		}
		
		//mraid.expand();
		var pos = mraid.getCurrentPosition();
		document.getElementById("asdf").innerHTML = "x: " + pos.x + ", y: " + pos.y + ", width: " + pos.width + ", height: " + pos.height;
	});
	
	mraid.addEventListener('stateChange', function(state){
		if (state == "resized") {
			showTestStatus();
		}
	});
} else {
	document.getElementById("asdf").style.backgroundColor = "#ff0000";
}
</script>

</body>
</html>